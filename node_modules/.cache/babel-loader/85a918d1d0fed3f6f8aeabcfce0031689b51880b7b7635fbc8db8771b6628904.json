{"ast":null,"code":"import _objectSpread from\"/home/project/stayhealthy/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/Login/Login.js\nimport React,{useMemo,useState}from'react';import{Link,useNavigate}from'react-router-dom';// ← line 13: useNavigate\nimport{useAuth}from'../../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const emailRe=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;export default function Login(){// line 11: state variables for managing form + UI\nconst[email,setEmail]=useState('');const[password,setPassword]=useState('');const[touched,setTouched]=useState({});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();// ← line 13\nconst{login:ctxLogin}=useAuth();// alias to avoid name clash\nconst errors=useMemo(()=>{const e={};if(!emailRe.test(email))e.email='Enter a valid email address.';if(password.length<8)e.password='Password must be at least 8 characters.';return e;},[email,password]);const hasErrors=Object.keys(errors).length>0;// line 20: function named `login` that handles submit + (optional) server API call\nasync function login(e){e.preventDefault();setTouched({email:true,password:true});if(hasErrors)return;try{setLoading(true);// --- Example server call (replace with your real API endpoint) ---\n// const res = await fetch('/api/auth/login', {\n//   method: 'POST',\n//   headers: { 'Content-Type': 'application/json' },\n//   body: JSON.stringify({ email, password })\n// });\n// if (!res.ok) throw new Error('Unable to login');\n// const data = await res.json(); // { user: { email, name, ... } }\n// For now, delegate to AuthContext (works with localStorage signup flow)\nawait ctxLogin({email,password});// line 40: navigate to Home on success\nnavigate('/');// Navbar will now show:  [Welcome, {emailBeforeAt}] [Logout]\n// (We already implemented this in Navbar by deriving from user.email)\n}catch(err){setError(err.message||'Invalid credentials.');}finally{setLoading(false);}}const onBlur=e=>setTouched(t=>_objectSpread(_objectSpread({},t),{},{[e.target.name]:true}));return/*#__PURE__*/_jsx(\"section\",{className:\"py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{maxWidth:520},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Welcome back! Please sign in to your account.\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{borderColor:'#fecaca',background:'#fee2e2',color:'#991b1b',marginTop:10},children:error}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-3\",onSubmit:login,noValidate:true,style:{display:'grid',gap:12},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",className:\"input\",placeholder:\"Enter your email\",value:email,onChange:e=>setEmail(e.target.value),onBlur:onBlur}),touched.email&&errors.email&&/*#__PURE__*/_jsx(\"small\",{style:{color:'#b91c1c'},children:errors.email}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\",className:\"input\",placeholder:\"Enter your password\",value:password,onChange:e=>setPassword(e.target.value),onBlur:onBlur}),touched.password&&errors.password&&/*#__PURE__*/_jsx(\"small\",{style:{color:'#b91c1c'},children:errors.password}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"label\",{className:\"row\",style:{gap:8},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\"}),\" Remember me\"]}),/*#__PURE__*/_jsx(Link,{className:\"muted\",to:\"/forgot-password\",children:\"Forgot password?\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",disabled:loading||hasErrors,children:loading?'Signing in…':'Sign In'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"muted mt-3\",children:[\"Don\\u2019t have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign up\"})]})]})});}","map":{"version":3,"names":["React","useMemo","useState","Link","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","emailRe","Login","email","setEmail","password","setPassword","touched","setTouched","error","setError","loading","setLoading","navigate","login","ctxLogin","errors","e","test","length","hasErrors","Object","keys","preventDefault","err","message","onBlur","t","_objectSpread","target","name","className","children","style","maxWidth","borderColor","background","color","marginTop","onSubmit","noValidate","display","gap","htmlFor","id","placeholder","value","onChange","type","justifyContent","to","disabled"],"sources":["/home/project/stayhealthy/src/pages/Login/Login.js"],"sourcesContent":["// src/pages/Login/Login.js\nimport React, { useMemo, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';          // ← line 13: useNavigate\nimport { useAuth } from '../../context/AuthContext';\n\nconst emailRe = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\nexport default function Login() {\n  // line 11: state variables for managing form + UI\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [touched, setTouched] = useState({});\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const navigate = useNavigate();                               // ← line 13\n\n  const { login: ctxLogin } = useAuth(); // alias to avoid name clash\n\n  const errors = useMemo(() => {\n    const e = {};\n    if (!emailRe.test(email)) e.email = 'Enter a valid email address.';\n    if (password.length < 8) e.password = 'Password must be at least 8 characters.';\n    return e;\n  }, [email, password]);\n\n  const hasErrors = Object.keys(errors).length > 0;\n\n  // line 20: function named `login` that handles submit + (optional) server API call\n  async function login(e) {\n    e.preventDefault();\n    setTouched({ email: true, password: true });\n    if (hasErrors) return;\n\n    try {\n      setLoading(true);\n\n      // --- Example server call (replace with your real API endpoint) ---\n      // const res = await fetch('/api/auth/login', {\n      //   method: 'POST',\n      //   headers: { 'Content-Type': 'application/json' },\n      //   body: JSON.stringify({ email, password })\n      // });\n      // if (!res.ok) throw new Error('Unable to login');\n      // const data = await res.json(); // { user: { email, name, ... } }\n\n      // For now, delegate to AuthContext (works with localStorage signup flow)\n      await ctxLogin({ email, password });\n\n      // line 40: navigate to Home on success\n      navigate('/');\n\n      // Navbar will now show:  [Welcome, {emailBeforeAt}] [Logout]\n      // (We already implemented this in Navbar by deriving from user.email)\n    } catch (err) {\n      setError(err.message || 'Invalid credentials.');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  const onBlur = (e) => setTouched((t) => ({ ...t, [e.target.name]: true }));\n\n  return (\n    <section className=\"py-6\">\n      <div className=\"container\" style={{ maxWidth: 520 }}>\n        <h2>Login</h2>\n        <p className=\"muted\">Welcome back! Please sign in to your account.</p>\n        {error && (\n          <div\n            className=\"card\"\n            style={{ borderColor: '#fecaca', background: '#fee2e2', color: '#991b1b', marginTop: 10 }}\n          >\n            {error}\n          </div>\n        )}\n\n        <form className=\"mt-3\" onSubmit={login} noValidate style={{ display: 'grid', gap: 12 }}>\n          {/* lines 66-69: sample email input using the useState (line 11) */}\n          <label htmlFor=\"email\">Email Address</label>\n          <input\n            id=\"email\"\n            name=\"email\"\n            className=\"input\"\n            placeholder=\"Enter your email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            onBlur={onBlur}\n          />\n          {touched.email && errors.email && <small style={{ color: '#b91c1c' }}>{errors.email}</small>}\n\n          {/* line 70: password field created similarly */}\n          <label htmlFor=\"password\">Password</label>\n          <input\n            id=\"password\"\n            name=\"password\"\n            type=\"password\"\n            className=\"input\"\n            placeholder=\"Enter your password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            onBlur={onBlur}\n          />\n          {touched.password && errors.password && <small style={{ color: '#b91c1c' }}>{errors.password}</small>}\n\n          <div className=\"row\" style={{ justifyContent: 'space-between' }}>\n            <label className=\"row\" style={{ gap: 8 }}>\n              <input type=\"checkbox\" /> Remember me\n            </label>\n            <Link className=\"muted\" to=\"/forgot-password\">\n              Forgot password?\n            </Link>\n          </div>\n\n          <button className=\"btn btn-primary\" type=\"submit\" disabled={loading || hasErrors}>\n            {loading ? 'Signing in…' : 'Sign In'}\n          </button>\n        </form>\n\n        <p className=\"muted mt-3\">\n          Don’t have an account? <Link to=\"/signup\">Sign up</Link>\n        </p>\n      </div>\n    </section>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}