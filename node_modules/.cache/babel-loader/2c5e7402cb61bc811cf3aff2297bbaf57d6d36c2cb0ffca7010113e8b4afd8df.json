{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{Link,NavLink,useNavigate}from\"react-router-dom\";import\"./Navbar.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Navbar(){// Mobile menu\nconst[open,setOpen]=useState(false);// User dropdown\nconst[menuOpen,setMenuOpen]=useState(false);// Display name shown in \"Welcome, ____\"\nconst[displayName,setDisplayName]=useState(\"User\");const navRef=useRef(null);const navigate=useNavigate();// Read user name once from sessionStorage (fallback to email prefix)\nuseEffect(()=>{const setNameFromStorage=()=>{const n=sessionStorage.getItem(\"name\");const email=sessionStorage.getItem(\"email\");if(n&&n.trim())setDisplayName(n.split(\" \")[0]);else if(email)setDisplayName(String(email).split(\"@\")[0]);else setDisplayName(\"User\");};setNameFromStorage();// Also react to changes made by other parts of the app (e.g., Profile save)\nconst onStorage=e=>{if(e.key===\"name\"||e.key===\"email\")setNameFromStorage();};window.addEventListener(\"storage\",onStorage);return()=>window.removeEventListener(\"storage\",onStorage);},[]);// Close dropdown on outside click / ESC\nuseEffect(()=>{function onDocClick(e){if(!menuOpen)return;if(navRef.current&&!navRef.current.contains(e.target)){setMenuOpen(false);}}function onKey(e){if(e.key===\"Escape\"){setMenuOpen(false);setOpen(false);}}document.addEventListener(\"mousedown\",onDocClick);document.addEventListener(\"keydown\",onKey);return()=>{document.removeEventListener(\"mousedown\",onDocClick);document.removeEventListener(\"keydown\",onKey);};},[menuOpen]);const handleLogout=()=>{sessionStorage.removeItem(\"auth-token\");sessionStorage.removeItem(\"name\");sessionStorage.removeItem(\"phone\");sessionStorage.removeItem(\"email\");navigate(\"/login\");};return/*#__PURE__*/_jsx(\"header\",{className:\"sh-navbar\",ref:navRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"sh-nav-inner\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/\",className:\"sh-brand\",onClick:()=>{setOpen(false);setMenuOpen(false);},children:[/*#__PURE__*/_jsx(\"span\",{className:\"sh-brand-dot\",children:\"\\u25CF\"}),\" \",/*#__PURE__*/_jsx(\"span\",{children:\"StayHealthy\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"sh-burger\",\"aria-label\":\"Toggle navigation\",\"aria-expanded\":open,onClick:()=>setOpen(v=>!v),children:[/*#__PURE__*/_jsx(\"span\",{className:\"sh-burger-bar\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sh-burger-bar\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sh-burger-bar\"})]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"sh-links \".concat(open?\"open\":\"\"),children:[/*#__PURE__*/_jsx(NavLink,{to:\"/\",end:true,onClick:()=>{setOpen(false);setMenuOpen(false);},children:\"Home\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/appointments\",onClick:()=>{setOpen(false);setMenuOpen(false);},children:\"Appointments\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/instant-consultation\",onClick:()=>{setOpen(false);setMenuOpen(false);},children:\"Instant Consultation\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/find-doctor\",onClick:()=>{setOpen(false);setMenuOpen(false);},children:\"Find Doctor\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/reviews\",onClick:()=>{setOpen(false);setMenuOpen(false);},children:\"Reviews\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"sh-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sh-user\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"sh-user-btn\",\"aria-haspopup\":\"menu\",\"aria-expanded\":menuOpen,onClick:()=>setMenuOpen(v=>!v),children:[/*#__PURE__*/_jsx(\"span\",{className:\"sh-user-greet\",children:\"Welcome,\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sh-user-name\",children:displayName}),/*#__PURE__*/_jsx(\"span\",{className:\"sh-user-caret\",children:\"\\u25BE\"})]}),menuOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"sh-menu\",role:\"menu\",children:[/*#__PURE__*/_jsx(NavLink,{to:\"/profile\",className:_ref=>{let{isActive}=_ref;return\"sh-menu-item\".concat(isActive?\" active\":\"\");},role:\"menuitem\",onClick:()=>{setMenuOpen(false);setOpen(false);},end:true,children:\"Your Profile\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/reports\",className:_ref2=>{let{isActive}=_ref2;return\"sh-menu-item\".concat(isActive?\" active\":\"\");},role:\"menuitem\",onClick:()=>{setMenuOpen(false);setOpen(false);},children:\"Your Reports\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"sh-logout-btn\",onClick:handleLogout,children:\"Logout\"})]})]})]})});}","map":{"version":3,"names":["React","useEffect","useRef","useState","Link","NavLink","useNavigate","jsx","_jsx","jsxs","_jsxs","Navbar","open","setOpen","menuOpen","setMenuOpen","displayName","setDisplayName","navRef","navigate","setNameFromStorage","n","sessionStorage","getItem","email","trim","split","String","onStorage","e","key","window","addEventListener","removeEventListener","onDocClick","current","contains","target","onKey","document","handleLogout","removeItem","className","ref","children","to","onClick","v","concat","end","role","_ref","isActive","_ref2"],"sources":["/home/project/stayhealthy/src/components/Navbar/Navbar.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { Link, NavLink, useNavigate } from \"react-router-dom\";\nimport \"./Navbar.css\";\n\nexport default function Navbar() {\n  // Mobile menu\n  const [open, setOpen] = useState(false);\n\n  // User dropdown\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  // Display name shown in \"Welcome, ____\"\n  const [displayName, setDisplayName] = useState(\"User\");\n\n  const navRef = useRef(null);\n  const navigate = useNavigate();\n\n  // Read user name once from sessionStorage (fallback to email prefix)\n  useEffect(() => {\n    const setNameFromStorage = () => {\n      const n = sessionStorage.getItem(\"name\");\n      const email = sessionStorage.getItem(\"email\");\n      if (n && n.trim()) setDisplayName(n.split(\" \")[0]);\n      else if (email) setDisplayName(String(email).split(\"@\")[0]);\n      else setDisplayName(\"User\");\n    };\n\n    setNameFromStorage();\n\n    // Also react to changes made by other parts of the app (e.g., Profile save)\n    const onStorage = (e) => {\n      if (e.key === \"name\" || e.key === \"email\") setNameFromStorage();\n    };\n    window.addEventListener(\"storage\", onStorage);\n    return () => window.removeEventListener(\"storage\", onStorage);\n  }, []);\n\n  // Close dropdown on outside click / ESC\n  useEffect(() => {\n    function onDocClick(e) {\n      if (!menuOpen) return;\n      if (navRef.current && !navRef.current.contains(e.target)) {\n        setMenuOpen(false);\n      }\n    }\n    function onKey(e) {\n      if (e.key === \"Escape\") {\n        setMenuOpen(false);\n        setOpen(false);\n      }\n    }\n    document.addEventListener(\"mousedown\", onDocClick);\n    document.addEventListener(\"keydown\", onKey);\n    return () => {\n      document.removeEventListener(\"mousedown\", onDocClick);\n      document.removeEventListener(\"keydown\", onKey);\n    };\n  }, [menuOpen]);\n\n  const handleLogout = () => {\n    sessionStorage.removeItem(\"auth-token\");\n    sessionStorage.removeItem(\"name\");\n    sessionStorage.removeItem(\"phone\");\n    sessionStorage.removeItem(\"email\");\n    navigate(\"/login\");\n  };\n\n  return (\n    <header className=\"sh-navbar\" ref={navRef}>\n      <div className=\"sh-nav-inner\">\n        <Link\n          to=\"/\"\n          className=\"sh-brand\"\n          onClick={() => {\n            setOpen(false);\n            setMenuOpen(false);\n          }}\n        >\n          <span className=\"sh-brand-dot\">●</span> <span>StayHealthy</span>\n        </Link>\n\n        {/* Burger for mobile */}\n        <button\n          className=\"sh-burger\"\n          aria-label=\"Toggle navigation\"\n          aria-expanded={open}\n          onClick={() => setOpen((v) => !v)}\n        >\n          <span className=\"sh-burger-bar\" />\n          <span className=\"sh-burger-bar\" />\n          <span className=\"sh-burger-bar\" />\n        </button>\n\n        {/* Links */}\n        <nav className={`sh-links ${open ? \"open\" : \"\"}`}>\n          <NavLink to=\"/\" end onClick={() => { setOpen(false); setMenuOpen(false); }}>\n            Home\n          </NavLink>\n          <NavLink to=\"/appointments\" onClick={() => { setOpen(false); setMenuOpen(false); }}>\n            Appointments\n          </NavLink>\n          <NavLink to=\"/instant-consultation\" onClick={() => { setOpen(false); setMenuOpen(false); }}>\n            Instant Consultation\n          </NavLink>\n          <NavLink to=\"/find-doctor\" onClick={() => { setOpen(false); setMenuOpen(false); }}>\n            Find Doctor\n          </NavLink>\n          <NavLink to=\"/reviews\" onClick={() => { setOpen(false); setMenuOpen(false); }}>\n            Reviews\n          </NavLink>\n\n          {/* Right cluster: user dropdown + logout */}\n          <div className=\"sh-right\">\n            {/* User dropdown */}\n            <div className=\"sh-user\">\n              <button\n                className=\"sh-user-btn\"\n                aria-haspopup=\"menu\"\n                aria-expanded={menuOpen}\n                onClick={() => setMenuOpen((v) => !v)}\n              >\n                <span className=\"sh-user-greet\">Welcome,</span>\n                <span className=\"sh-user-name\">{displayName}</span>\n                <span className=\"sh-user-caret\">▾</span>\n              </button>\n\n              {menuOpen && (\n                <div className=\"sh-menu\" role=\"menu\">\n                  <NavLink\n                    to=\"/profile\"\n                    className={({ isActive }) => `sh-menu-item${isActive ? \" active\" : \"\"}`}\n                    role=\"menuitem\"\n                    onClick={() => { setMenuOpen(false); setOpen(false); }}\n                    end\n                  >\n                    Your Profile\n                  </NavLink>\n\n                  <NavLink\n                    to=\"/reports\"\n                    className={({ isActive }) => `sh-menu-item${isActive ? \" active\" : \"\"}`}\n                    role=\"menuitem\"\n                    onClick={() => { setMenuOpen(false); setOpen(false); }}\n                  >\n                    Your Reports\n                  </NavLink>\n                </div>\n              )}\n            </div>\n\n            {/* Logout button */}\n            <button className=\"sh-logout-btn\" onClick={handleLogout}>\n              Logout\n            </button>\n          </div>\n        </nav>\n      </div>\n    </header>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}