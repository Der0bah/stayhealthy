{"ast":null,"code":"import _objectSpread from\"/home/project/stayhealthy/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext(null);// ✅ Declare the hook ONLY ONCE\nexport const useAuth=()=>useContext(AuthContext);const LS_KEY='app_auth_user';export default function AuthProvider(_ref){let{children}=_ref;const[user,setUser]=useState(null);useEffect(()=>{const saved=localStorage.getItem(LS_KEY);if(saved)setUser(JSON.parse(saved));},[]);useEffect(()=>{if(user)localStorage.setItem(LS_KEY,JSON.stringify(user));else localStorage.removeItem(LS_KEY);},[user]);const signup=profile=>setUser(profile);// simple example login that matches saved signup email\nconst login=_ref2=>{let{email}=_ref2;const saved=localStorage.getItem(LS_KEY);if(!saved)throw new Error('No account found. Please sign up.');const savedUser=JSON.parse(saved);if(savedUser.email!==email)throw new Error('Email does not match any account.');setUser(savedUser);};const logout=()=>setUser(null);const updateProfile=updates=>setUser(u=>_objectSpread(_objectSpread({},u),updates));return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,signup,login,logout,updateProfile},children:children});}","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","jsx","_jsx","AuthContext","useAuth","LS_KEY","AuthProvider","_ref","children","user","setUser","saved","localStorage","getItem","JSON","parse","setItem","stringify","removeItem","signup","profile","login","_ref2","email","Error","savedUser","logout","updateProfile","updates","u","_objectSpread","Provider","value"],"sources":["/home/project/stayhealthy/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from 'react';\n\nconst AuthContext = createContext(null);\n\n// ✅ Declare the hook ONLY ONCE\nexport const useAuth = () => useContext(AuthContext);\n\nconst LS_KEY = 'app_auth_user';\n\nexport default function AuthProvider({ children }) {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const saved = localStorage.getItem(LS_KEY);\n    if (saved) setUser(JSON.parse(saved));\n  }, []);\n\n  useEffect(() => {\n    if (user) localStorage.setItem(LS_KEY, JSON.stringify(user));\n    else localStorage.removeItem(LS_KEY);\n  }, [user]);\n\n  const signup = (profile) => setUser(profile);\n\n  // simple example login that matches saved signup email\n  const login = ({ email }) => {\n    const saved = localStorage.getItem(LS_KEY);\n    if (!saved) throw new Error('No account found. Please sign up.');\n    const savedUser = JSON.parse(saved);\n    if (savedUser.email !== email) throw new Error('Email does not match any account.');\n    setUser(savedUser);\n  };\n\n  const logout = () => setUser(null);\n  const updateProfile = (updates) => setUser((u) => ({ ...u, ...updates }));\n\n  return (\n    <AuthContext.Provider value={{ user, signup, login, logout, updateProfile }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n"],"mappings":"8GAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9E,KAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,IAAI,CAAC,CAEvC;AACA,MAAO,MAAM,CAAAO,OAAO,CAAGA,CAAA,GAAMN,UAAU,CAACK,WAAW,CAAC,CAEpD,KAAM,CAAAE,MAAM,CAAG,eAAe,CAE9B,cAAe,SAAS,CAAAC,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC/C,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAEtCD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAY,KAAK,CAAGC,YAAY,CAACC,OAAO,CAACR,MAAM,CAAC,CAC1C,GAAIM,KAAK,CAAED,OAAO,CAACI,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC,CAAC,CACvC,CAAC,CAAE,EAAE,CAAC,CAENZ,SAAS,CAAC,IAAM,CACd,GAAIU,IAAI,CAAEG,YAAY,CAACI,OAAO,CAACX,MAAM,CAAES,IAAI,CAACG,SAAS,CAACR,IAAI,CAAC,CAAC,CAAC,IACxD,CAAAG,YAAY,CAACM,UAAU,CAACb,MAAM,CAAC,CACtC,CAAC,CAAE,CAACI,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAU,MAAM,CAAIC,OAAO,EAAKV,OAAO,CAACU,OAAO,CAAC,CAE5C;AACA,KAAM,CAAAC,KAAK,CAAGC,KAAA,EAAe,IAAd,CAAEC,KAAM,CAAC,CAAAD,KAAA,CACtB,KAAM,CAAAX,KAAK,CAAGC,YAAY,CAACC,OAAO,CAACR,MAAM,CAAC,CAC1C,GAAI,CAACM,KAAK,CAAE,KAAM,IAAI,CAAAa,KAAK,CAAC,mCAAmC,CAAC,CAChE,KAAM,CAAAC,SAAS,CAAGX,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC,CACnC,GAAIc,SAAS,CAACF,KAAK,GAAKA,KAAK,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,mCAAmC,CAAC,CACnFd,OAAO,CAACe,SAAS,CAAC,CACpB,CAAC,CAED,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAMhB,OAAO,CAAC,IAAI,CAAC,CAClC,KAAM,CAAAiB,aAAa,CAAIC,OAAO,EAAKlB,OAAO,CAAEmB,CAAC,EAAAC,aAAA,CAAAA,aAAA,IAAWD,CAAC,EAAKD,OAAO,CAAG,CAAC,CAEzE,mBACE1B,IAAA,CAACC,WAAW,CAAC4B,QAAQ,EAACC,KAAK,CAAE,CAAEvB,IAAI,CAAEU,MAAM,CAAEE,KAAK,CAAEK,MAAM,CAAEC,aAAc,CAAE,CAAAnB,QAAA,CACzEA,QAAQ,CACW,CAAC,CAE3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}